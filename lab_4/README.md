# ERROR: could not load library
### PostgreSQL/11/lib/plpython3.dll": the specified module could not be found.

Если у вас заработал plpython3 с первого раза на винде - вы счастливчик.  

Что я только не пыталась сделать: 
* переустанавливала Postgresql (как оказалось версия питона+библиотечки +- хардкодятся при установке и зависят от найденного на компе питона)
* Скачивала python2, ставила его в PATH, делая питоном по умолчанию после этого переустанавливала Postgresql;
* использовала plpythonu, plpython2u, plpython3u
* пробовала ставить разные верисии 3го питона
* пыталась в [лайфхаки с формуов](https://www.sql.ru/forum/1003721/kak-ustnovit-plpython-pod-win)
* ~~загуглила как перейти на mssql~~

![](https://i.ytimg.com/vi/nfcXKuZrf8M/maxresdefault.jpg)

Не знаю какая страница это гугла была, но finally я нашла [то, что мне помогло](https://postgresrocks.enterprisedb.com/t5/PostgreSQL/unable-to-install-pl-python-extension/m-p/4661).

Шо делать спросите вы.

Одна магическая строчка в консольке от имени администратора:  
```
set PYTHON_HOME=C:\Program Files\Python37(директория вашей папки с python)
```

Есть вероятность что это делать надо до установки postgres-а.
(на момент установки переменной среды python_home я опять снесла postgre (а не нужны ли вам бэкапы?)
и потом при установке он finally начал использовать другую версию библиотечек
(все файлы теперь cpython-36 хотя стоит 37 питон на компе, раньше при установке создавались cpython-37 и ничего не работало)

### По моим шагам
* удалить постгрес
* set PYTHON_HOME (и сам python добавить в PATH)
* скачать постгрес

ЕСЛИ ЭТО РАБОТАЕТ И БЕЗ УДАЛЕНИЯ постгреса - маякните.  
Или если для вас это вообще не работает тоже маякните. Я вам посочувствую)))))

PS: описанные выше действия являются лично моим опытом, гарантий что оно заработает после указанных шагов - нет. 
### Удачи)
